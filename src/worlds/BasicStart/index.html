<html>
<head>
  <!-- Circles' head scripts [REQUIRED] -->
  <circles-start-scripts/>
  <!-- Physics script goes after the Circles' head scripts [IMPORTANT]-->
  <script src="/global/js/libs/aframe-physics-system.min.js"></script>
  <script src="/worlds/BasicStart/components/physics-object.js"></script>
  <!--Other Components -->
  <script src="/worlds/BasicStart/components/floating-ui.js"></script>
  <script src="/worlds/BasicStart/components/item-pickup-drop-manager.js"></script>
  <script src="/worlds/BasicStart/components/item-checker.js"></script>
  <script src="/worlds/BasicStart/components/screen.js"></script>
  <script src="/worlds/BasicStart/components/game-master.js"></script>
  <!-- Artifact Spawning Script -->
  <script src="/worlds/BasicStart/scripts/spawn-artifacts.js"></script>
  <!-- Game Master Script -->
  <script src="/worlds/BasicStart/scripts/game-setup.js"></script>
  <!-- External Library Dependancies -->
  <!-- A-Frame Look-At -->
  <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script> 


</head>
<!-- setupGame() is in game-setup.js -->
<body onload="setupGame()"> 
  <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
  <circles-start-ui/>

  <!-- a-scene with 'circles-properties' component [REQUIRED] -->
  <a-scene circles_scene_properties physics="debug:true; gravity:-9.8; friction: 0.1;">

    <a-assets>

      <!-- Circles' built-in assets [REQUIRED] -->
      <circles-assets/>

      <!-- Spawnpoint -->
      <a-entity circles-checkpoint circles-spawnpoint position="-9 0 0"></a-entity>

      <!-- Environment (.glb) & Navmesh Models -->
      <a-asset-item id="ID_Environment_Model" src="/worlds/BasicStart/assets/models/Environment_V2.glb" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Navmesh_Model" src="/worlds/BasicStart/assets/models/Navmesh_V2.glb" response-type="arraybuffer"></a-asset-item>
      
      <!-- Artifact Models (.glb) -->
      <a-asset-item id="ID_Clock_Model" src="/worlds/BasicStart/assets/models/artifacts/Clock.glb" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_DiskDrive_Model" src="/worlds/BasicStart/assets/models/artifacts/DiskDrive.glb" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Fridge_Model" src="/worlds/BasicStart/assets/models/artifacts/Fridge.glb" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_OpticalLens_Model" src="/worlds/BasicStart/assets/models/artifacts/OpticalLens.glb" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Radio_Model" src="/worlds/BasicStart/assets/models/artifacts/Radio.glb" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Syringe_Model" src="/worlds/BasicStart/assets/models/artifacts/Syringe.glb" response-type="arraybuffer"></a-asset-item>

      <!-- Audio Files (.wav) -->
      <a-asset-item id="ID_Spaceship_Ambience_SFX" src="/worlds/BasicStart/assets/audio/SFX/Spaceship_Ambience.wav" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Door_Hiss_SFX" src="/worlds/BasicStart/assets/audio/SFX/Door_Hiss.wav" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Item_Pickup_SFX" src="/worlds/BasicStart/assets/audio/SFX/Item_Pickup.wav" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Item_Dropped_SFX" src="/worlds/BasicStart/assets/audio/SFX/Item_Dropped.wav" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Item_Held_SFX" src="/worlds/BasicStart/assets/audio/SFX/Item_Held.wav" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Checking_Item_SFX" src="/worlds/BasicStart/assets/audio/SFX/Checking_Item.wav" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Wrong_Item_SFX" src="/worlds/BasicStart/assets/audio/SFX/Wrong_Item.wav" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_Correct_Item_SFX" src="/worlds/BasicStart/assets/audio/SFX/Correct_Item.wav" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="ID_System_Beep_SFX" src="/worlds/BasicStart/assets/audio/SFX/System_Beep.wav" response-type="arraybuffer"></a-asset-item>

    </a-assets>

    <!-- Circles' built-in manager and avatar [REQUIRED] -->
    <circles-manager-avatar/>
    
    <!--Non-Diagetic Sounds -->
    <a-entity circles-sound="type:ambience; src:#ID_Spaceship_Ambience_SFX; autoplay:true; loop:true; volume:0.1;"></a-entity>
    <a-entity circles-sound="type:basic-nondiegetic; src:#ID_Door_Hiss_SFX; autoplay:true; volume:0.1;"></a-entity>
    <a-entity id="pickupSFXPlayer" circles-sound="type:basic-nondiegetic; src:#ID_Item_Pickup_SFX; autoplay:false; loop:false; volume:0.2;"></a-entity>
    <a-entity id="dropSFXPlayer" circles-sound="type:basic-nondiegetic; src:#ID_Item_Dropped_SFX; autoplay:false; loop:false; volume:0.2;"></a-entity>
    <a-entity id="heldSFXPlayer" circles-sound="type:basic-nondiegetic; src:#ID_Item_Held_SFX; autoplay:false; loop:true; volume:0.19;"></a-entity>

    <!-- Manager Components -->
    <a-entity item-pickup-drop-manager></a-entity>

    <!-- Item Spawners -->
    <a-box
      id="ID_Artifact_Spawner_1"
      position="-9 1 -2"
      rotation="0 0 0"
      height="0.25"
      width="0.25"
      depth="0.25"
      color="tomato"
    ></a-box>
    
    <a-box
      id="ID_Artifact_Spawner_2"
      position="-9 1 -4"
      rotation="0 0 0"
      height="0.25"
      width="0.25"
      depth="0.25"
      color="tomato"
    ></a-box>
    
    <a-box
      id="ID_Artifact_Spawner_3"
      position="-9 1 -6"
      rotation="0 0 0"
      height="0.25"
      width="0.25"
      depth="0.25"
      color="tomato"
    ></a-box>

    <a-box
      id="ID_Artifact_Checker_1"
      position="-5 1 5"
      height="0.25"
      width="0.25"
      depth="0.25"
      color="green"
      item-checker
    ></a-box>

    <!-- Screens -->
    <a-entity screen id="ID_Screen_1" position="-7.924 1.85045 8.802" geometry="primitive:box"></a-entity>
    <a-entity screen id="ID_Screen_2" position="-20.98 1.85045 8.802" geometry="primitive:box"></a-entity>
    <!-- <a-box
      id="ID_Artifact_Checker_2"
      position="-3 1 5"
      height="0.25"
      width="0.25"
      depth="0.25"
      color="green"
      item-checker
    ></a-box>

    <a-box
      id="ID_Artifact_Checker_3"
      position="-1 1 5"
      height="0.25"
      width="0.25"
      depth="0.25"
      color="green"
      item-checker
    ></a-box> -->

    <!-- TEST OBJECTS - DELETE WHEN DONE TESTING -->
    <!-- BUTTON FOR SPAWNING ARTIFACT -->
    <a-entity
      id="test_button"
      circles-button
      position="-9 0 -1"
    ></a-entity>

    <!-- Environment (.glb) & Navmesh Entities -->
    <a-entity
      gltf-model="#ID_Environment_Model"
      position="0 0 0"
      shadow="receive: true; cast: true"
    ></a-entity>

    <a-entity
    id="ID_Navmesh"
      gltf-model="#ID_Navmesh_Model"
      position="0 0 0"
      visible="false"
      nav-mesh
    ></a-entity>

    <!-- Component Lighting -->
    <a-entity light="type: ambient; intensity: 0.15;"></a-entity>
    <a-entity light="intensity: 0.1; castShadow: false" position="1 0 0"></a-entity>
    <a-entity light="intensity: 0.1; castShadow: false" position="-1 0 0"></a-entity>
    <a-entity light="intensity: 0.1; castShadow: false" position="0 -1 0"></a-entity>
    <a-entity light="intensity: 0.6; castShadow: false" position="0 1 0"></a-entity>
    <a-entity light="intensity: 0.1; castShadow: false" position="0 0 1"></a-entity>
    <a-entity light="intensity: 0.1; castShadow: false" position="0 0 -1"></a-entity>

  </a-scene>

  <!-- Circles' end scripts [REQUIRED] -->
  <circles-end-scripts/>
 </body>
</html>